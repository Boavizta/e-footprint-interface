{% load static %}
<!DOCTYPE html>
<html lang="en" class="min-h-screen min-w-full">
{% load django_bootstrap5 %}
<head>
    <meta charset="UTF-8"/>
    <title>e-footprint</title>
    {% bootstrap_css %}
    <link rel="icon" type="image/x-icon" href="/static/icons/sidenav/logo.svg"/>
    <link rel="stylesheet" href="{% static 'css/main.css' %}"/>
    <script src="{% static 'scripts/plotly_basic.min.js' %}"></script>
    <script src="{% static 'scripts/htmx.min.js' %}"></script>
    <script src="{% static 'scripts/_hyperscript.min.js' %}"></script>
    <script src="{% static 'scripts/drawflow_source.js' %}" defer></script>
    <script src="{% static 'scripts/drawflow.js' %}" defer></script>
</head>

<body class="min-vh-100 d-flex flex-row overflow-auto" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <div class="container-fluid p-0">
        <div class="row g-0 p-0">
            <div class="col-2">
                <nav class="text-light bg-dark sticky-top vh-100 pt-4 pb-4">
                    <a href="/" class="d-flex justify-content-center py-3">
                        <img src="{% static 'icons/sidenav/logo.svg' %}" alt="E-Footprint"/>
                    </a>
                    <div class="d-flex flex-column gap-3 p-3 border-top border-bottom border-secondary">
                        <button hx-get="/understand" hx-target="#main-content-block" hx-swap="beforeend"
                                    hx-push-url="/understand" hx-indicator="#global_loader" hx-disabled-elt="button"
                                script="on click remove the first <div/> in #main-content-block"
                                class="d-flex flex-row gap-2 btn btn-dark text-white"><img src="/static/icons/sidenav/home.svg" alt="Understand"/>
                            <span>Understand</span>
                        </button>
                        <button hx-get="/quiz/onboarding" hx-target="#main-content-block" hx-swap="beforeend"
                                hx-push-url="/quiz/onboarding" hx-indicator="#global_loader" hx-disabled-elt="button"
                                script="on click remove the first <div/> in #main-content-block"
                                class="d-flex flex-row gap-2 btn btn-dark text-white"><img src="/static/icons/sidenav/analyze.svg" alt="New modeling"/>
                            <span class="text-nowrap">Create new modeling</span>
                        </button>
                        <button hx-get="/model_builder" hx-target="#main-content-block" hx-swap="beforeend"
                                hx-push-url="/model_builder/" hx-indicator="#global_loader" hx-disabled-elt="button"
                                script="on click remove the first <div/> in #main-content-block
                                        on htmx:afterRequest js init('{{ request.scheme }}://{{ request.get_host }}', '{{csrf_token}}') end"
                                class="d-flex flex-row gap-2 btn btn-dark text-white"><img src="/static/icons/sidenav/analyze.svg" alt="Model builder"/>
                            <span class="text-nowrap">Dashboard view</span>
                        </button>
                    </div>
                </nav>
            </div>
            <div class="col-10 d-flex justify-content-center py-2 position-relative">
                <!-- Loader -->
                <img id="global_loader"
                     src="{% static 'loaders/bars.svg' %}"
                     class="htmx-indicator position-absolute top-50 start-50 translate-middle"
                     style="display: none; pointer-events: none;"
                     alt="Loading...">
                <!-- Main Content -->
                <main id="main-content-block" class="text-center w-100">
                    {% if home %}
                    {% include "home.html" %}
                    {% elif understand %}
                    {% include "understand.html" %}
                    {% elif analyze %}
                    {% include "analyze/analyze.html" %}
                    {% elif onboarding %}
                    {% include "quiz/onboarding.html" %}
                    {% elif userJourneys %}
                    {% include "quiz/user-journeys.html" %}
                    {% elif services %}
                    {% include "quiz/services.html" %}
                    {% elif usagePatterns %}
                    {% include "quiz/usage-patterns.html" %}
                    {% elif apis %}
                    {% include "quiz/apis.html" %}
                    {% elif modelBuilderMain %}
                    {% include "model_builder/model-builder-main.html" %}
                    {% elif analyze %}
                    {% include "analyze.html" %}
                    {% endif %}
                </main>
            </div>
        </div>
    </div>
    {% bootstrap_javascript %}
</body>
</html>
