{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>e-footprint</title>
        <link rel="stylesheet" href="{% static 'css/bs_main.css' %}"/>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/static/icons/sidenav/logo.svg"/>
        <link rel="stylesheet" href="{% static 'css/main.css' %}"/>
        <link rel="stylesheet" href="{% static 'css/flatpickr.min.css' %}"/>
        <script src="{% static 'scripts/external_librairies/bootstrap.bundle.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/htmx.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/_hyperscript.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/leader-line.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/Sortable.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/hammer.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/luxon.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/chart.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/chart_js_adapter_luxon.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/chart_js_plugin_zoom.min.js' %}"></script>
        <script src="{% static 'scripts/external_librairies/flatpickr.min.js' %}"></script>
        <script src="{% static 'scripts/timeseries.js' %}"></script>

</head>

<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <div class="container-fluid p-0">
        <!-- Main Content -->
        {% include 'navbar.html' %}
        <div id="loading-bar" class="bg-body-tertiary">
            <div class="progress-bar"></div>
        </div>
        <main id="main-content-block" class="text-center w-100">
            {% if home %}
            {% include "home.html" %}
            {% elif understand %}
            {% include "understand.html" %}
            {% elif modelBuilderMain %}
            {% include "model_builder/model_builder_main.html" %}
            {% endif %}
        </div>
    </div>
        <script src="{% static 'scripts/leaderline_utils.js' %}"></script>
        <script src="{% static 'scripts/hammer_utils.js' %}"></script>
        <script src="{% static 'scripts/dynamic_forms.js' %}"></script>
        <script src="{% static 'scripts/loading_bar.js' %}"></script>
        <script src="{% static 'scripts/modal_utils.js' %}"></script>
        <script src="{% static 'scripts/side_panel_utils.js' %}"></script>
        <script src="{% static 'scripts/result_chart.js' %}"></script>
        <script src="{% static 'scripts/model_builder_main.js' %}"></script>
        <script>
            window.initModelBuilderMain = initModelBuilderMain;
            window.allLines = new Map();

            document.body.addEventListener('initModelBuilderMain', function (event) {
               window.initModelBuilderMain();
            });

            window.addEventListener("load", function () {
                if (window.location.pathname === "/model_builder/") {
                    window.initModelBuilderMain();
                }
            });

            document.body.addEventListener("computeResultChart", function(event) {
                displayPanelResult();
                drawAreaResultChart();
                updateAreaResultChart('bar', 'year');
            });
        </script>
    </body>
</html>
