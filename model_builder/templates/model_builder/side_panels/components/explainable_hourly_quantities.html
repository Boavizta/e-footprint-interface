{% load custom_filters %}
{% load static %}

<div class="row mb-3">
    <p class="col-auto col-form-label">{{ item.attr_name_web|capfirst }}</p>
    <div class="col-auto">
        <div class="btn btn-light p-1"
             hx-get="{% url 'get_chart_and_explanation_calculated_attribute' object_to_edit.efootprint_id item.attr_name_in_mod_obj_container %}"
             hx-target="#chart-calculated-attribute"
             hx-trigger="click"
             hx-swap="innerHTML"
             hx-disabled-elt="button"
             _="on click openCalculatedAttributesChart()"
        >
            <img src="{% static 'icons/timeseries-chart.svg' %}" width="16" height="16" alt="calculus-graph-icon">
        </div>
    </div>
    <div class="col-auto">
        <button type="button"
                hx-get="{% url 'get_explanation_calculated_attribute' object_to_edit.efootprint_id item.attr_name_in_mod_obj_container %}"
                hx-target="#collapse-calculated_attributes-{{ item.attr_name_in_mod_obj_container }}"
                hx-trigger="click once"
                hx-swap="innerHTML"
                hx-disabled-elt="button"
                class="btn btn-light p-1"
                data-bs-toggle="collapse"
                data-bs-target="#collapse-calculated_attributes-{{ item.attr_name_in_mod_obj_container }}"
                aria-expanded="false"
                aria-controls="collapse-calculated_attributes-{{ item.attr_name_in_mod_obj_container }}">
            <img src="{% static 'icons/formula.svg' %}" width="16" height="16" alt="formula-icon">
        </button>
    </div>
</div>

<div class="collapse" id="collapse-calculated_attributes-{{ item.attr_name_in_mod_obj_container }}">
    <div class="card card-body mb-3 no-truncate">
        <a class="btn btn-light btn-sm"
           href="{% url 'display-calculus-graph' object_to_edit.efootprint_id item.attr_name_in_mod_obj_container %}"
           target="_blank">
            See the calculus graph
            <img src="{% static 'icons/calculus-graph.svg' %}" alt="calculus-graph-icon">
        </a>
    </div>
</div>
