{% extends "model_builder/side_panels/components/side_panel_structure.html" %}
{% load static %}

{% block panel_body %}
    <form id="sidePanelForm"
        hx-post="{% url 'add-new-object' 'Server' %}"
        hx-target="#server-list"
        hx-swap="beforeend"
        hx-disabled-elt="button"
        hx-on::after-request="closeAndEmptySidePanel()"
        hx-vals="js:{
            storage_form_data: Object.fromEntries(new FormData(document.getElementById('formStorage')))
        }">
        {% with helper_message="How to choose the server type?<br><br>“GPUserver” to get help on configuring servers for AI use.<br><br>“BoaviztaCloudServer” to get help on configuring servers for all other kinds of use.<br><br>“Server” to fully customize your server." %}
            {% include "model_builder/side_panels/add/dynamic_add_object_form_content.html" %}
        {% endwith %}
    </form>
    <form id="formStorage">
        {% include "model_builder/side_panels/add/dynamic_add_object_form_content.html" with obj_type=storage_obj_type form_sections=storage_form_sections dynamic_form_data=storage_dynamic_form_data next_efootprint_object_rank=storage_next_efootprint_object_rank %}
    </form>

    <div class="mb-3">
        <p class="mt-4">
            You will be able to edit all attributes about the {{ obj_type }} later in the dedicated panel.
        </p>
    </div>

    <div class="mb-3">
        <button
                    id="btn-submit-form"
                    class="btn btn-primary rounded-pill w-100"
                    onclick="document.getElementById('sidePanelForm').requestSubmit()"
            >
                Save
        </button>
    </div>
{% endblock %}
